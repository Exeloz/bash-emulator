<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />

    <title>TryBash Emulator</title>

    <style>
      html,
      body {
        color: white;
        font-size: 115%;
        height: 100%;
        width: 100%;
        margin: 0;
        padding: 0;
      }

      body,
      #input {
        background: black;
        font-family: monospace;
        line-height: 120%;
      }

      #output {
        white-space: pre-wrap;
      }

      #input {
        width: calc(
          90% - 20px - var(--prefix-width)
        );
        border: none;
        font-size: inherit;
      }

      #input_prefix {
        width: fit-content;
      }

      :root {
        --prefix-width: 0px; 
      }
      #input:focus {
        outline: none;
      }

      #input,
      .input-wrap {
        color: lime;
      }

      .error {
        color: red;
      }
    </style>
  </head>
  <body>
    <div id="output"></div>

    <div class="input-wrap">
      <span id="input_prefix">$</span>
      <input id="input" type="text" autofocus />
    </div>

    <script src="bundle.min.js"></script>
    <script>
      var emulator = bashEmulator({
        workingDirectory: "/",
        fileSystem: {
          "/": {
            type: "dir",
            modified: Date.now(),
          },
          "/README.txt": {
            type: "file",
            modified: Date.now(),
            content: "empty",
          },
          "/home": {
            type: "dir",
            modified: Date.now(),
          },
          "/home/user/journal.txt": {
            type: "file",
            modified: Date.now(),
            content: "this is private!",
          },
          "/home/user": {
            type: "dir",
            modified: Date.now(),
          },
        },
      });

      attachEventListeners(document, emulator);

      emulator.commands.clear = function (env) {
        output.innerHTML = "";
        env.exit();
      };

      run("pwd").then(function () {
        run("ls");
      });
    </script>
  </body>
</html>
